<VirtualHost *:80>
  ServerAdmin  it-support@sib.swiss
  ServerName   localhost
  ServerAlias    
      
  DocumentRoot "/var/www/fhd-portal/htdocs/app"
  ErrorLog /logs/apache_fhd-portal-error_log
  CustomLog /logs/apache_fhd-portal-access_log combined
    
  # Enable http authorization headers
  SetEnvIfNoCase ^Authorization$ "(.+)" HTTP_AUTHORIZATION=$1
        
  # Add vhost name to log entries
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" vhost_combined
  LogFormat "%v %h %l %u %t \"%r\" %>s %b" vhost_common
    
  ProxyPassMatch ^/api/(.*)$ fcgi://api:9000/var/www/fhd-portal/htdocs/api/public/index.php/$1

  <Directory "/var/www/fhd-portal/htdocs/api">
      AllowOverride None
      Require all granted
  </Directory>
  <Directory "/var/www/fhd-portal/htdocs/app">
    # Changed to 'none', please activate only in sub-directories were htaccess files will be used.
    AllowOverride All
    Options +FollowSymLinks  -Indexes
    # Apache 2.4 style:
    Require all granted
    FallbackResource "index.html"
  </Directory>
    
  <Proxy "fcgi://php:9000">
    ProxySet timeout=30000
  </Proxy>
</VirtualHost>
<VirtualHost *:443>
  ServerAdmin  it-support@sib.swiss
  ServerName   locahost
  ServerAlias    
  
  SSLEngine on
  SSLCertificateFile /usr/local/apache2/conf/server.crt
  SSLCertificateKeyFile /usr/local/apache2/conf/server.key
      
  DocumentRoot "/var/www/fhd-portal/htdocs/app"
  ErrorLog /logs/apache_fhd-portal-ssl-error_log
  CustomLog /logs/apache_fhd-portal-ssl-access_log combined
    
  # Enable http authorization headers
  SetEnvIfNoCase ^Authorization$ "(.+)" HTTP_AUTHORIZATION=$1
        
  # Add vhost name to log entries
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" vhost_combined
  LogFormat "%v %h %l %u %t \"%r\" %>s %b" vhost_common
    
  ProxyPassMatch ^/api/(.*)$ fcgi://api:9000/var/www/fhd-portal/htdocs/api/public/index.php/$1

  <Directory "/var/www/fhd-portal/htdocs/api">
      AllowOverride None
      Require all granted
  </Directory>
  <Directory "/var/www/fhd-portal/htdocs/app">
    # Changed to 'none', please activate only in sub-directories were htaccess files will be used.
    AllowOverride All
    Options +FollowSymLinks  -Indexes
    # Apache 2.4 style:
    Require all granted
    FallbackResource "index.html"
  </Directory>
    
  <Proxy "fcgi://php:9000">
    ProxySet timeout=30000
  </Proxy>
</VirtualHost>